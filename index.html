<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Phrases â€” Nauka Phrasal Verbs</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<div class="app-container">

  <!-- ====== Nawigacja (ukryta domyÅ›lnie) ====== -->
  <nav class="nav hidden" id="main-nav">
    <span class="nav-brand">English Phrases</span>
    <div class="nav-links">
      <button class="nav-link" data-screen="home">Nauka</button>
      <button class="nav-link" data-screen="dashboard">PostÄ™py</button>
      <button class="nav-link" data-screen="settings">Ustawienia</button>
      <button class="nav-link" data-screen="admin">Admin</button>
    </div>
  </nav>

  <!-- ====== Ekran: Logowanie / Rejestracja ====== -->
  <div class="screen auth-screen active" id="screen-auth">
    <div class="auth-card">
      <h1 class="auth-title">English Phrases</h1>
      <p class="auth-subtitle">Nauka phrasal verbs z inteligentnym systemem powtÃ³rek</p>

      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">Zaloguj siÄ™</button>
        <button class="auth-tab" data-tab="register">Zarejestruj siÄ™</button>
      </div>

      <!-- Komunikat bÅ‚Ä™du / sukcesu -->
      <div id="auth-message" class="alert hidden"></div>

      <!-- Formularz logowania -->
      <form id="login-form">
        <div class="form-group">
          <label class="form-label" for="login-email">Email</label>
          <input class="form-input" type="email" id="login-email" placeholder="twoj@email.com" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="login-password">HasÅ‚o</label>
          <input class="form-input" type="password" id="login-password" placeholder="Minimum 6 znakÃ³w" required>
        </div>
        <button type="submit" class="btn btn-primary">Zaloguj siÄ™</button>
      </form>

      <!-- Formularz rejestracji -->
      <form id="register-form" class="hidden">
        <div class="form-group">
          <label class="form-label" for="register-email">Email</label>
          <input class="form-input" type="email" id="register-email" placeholder="twoj@email.com" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="register-password">HasÅ‚o</label>
          <input class="form-input" type="password" id="register-password" placeholder="Minimum 6 znakÃ³w" required minlength="6">
        </div>
        <div class="form-group">
          <label class="form-label" for="register-password-confirm">PowtÃ³rz hasÅ‚o</label>
          <input class="form-input" type="password" id="register-password-confirm" placeholder="PowtÃ³rz hasÅ‚o" required minlength="6">
        </div>
        <button type="submit" class="btn btn-primary">Zarejestruj siÄ™</button>
      </form>
    </div>
  </div>

  <!-- ====== Ekran: Oczekiwanie na zatwierdzenie ====== -->
  <div class="screen auth-screen" id="screen-pending">
    <div class="auth-card">
      <div class="alert-pending">
        <h3>Oczekiwanie na zatwierdzenie</h3>
        <p>Twoje konto zostaÅ‚o utworzone, ale czeka na zatwierdzenie przez administratora.</p>
        <p class="mt-16 text-muted">Otrzymasz dostÄ™p, gdy administrator zatwierdzi Twoje konto.</p>
        <button class="btn btn-outline mt-24" id="pending-logout">Wyloguj siÄ™</button>
      </div>
    </div>
  </div>

  <!-- ====== Ekran: Strona gÅ‚Ã³wna ====== -->
  <div class="screen" id="screen-home">
    <div class="home-header">
      <h1 class="home-greeting" id="home-greeting">CzeÅ›Ä‡!</h1>
      <p class="home-date" id="home-date"></p>
    </div>

    <div class="method-card" id="method-card">
      <button class="method-toggle" id="method-toggle">
        <span class="method-toggle-icon">&#9656;</span>
        <span class="method-toggle-title">Jak dziaÅ‚a nauka?</span>
      </button>
      <div class="method-content hidden" id="method-content">
        <div class="method-step">
          <div class="method-step-icon">ğŸ“¦</div>
          <div class="method-step-text">
            <strong>System pudeÅ‚ek</strong>
            <p>KaÅ¼dy phrasal verb zaczyna w "PudeÅ‚ku 1" (powtÃ³rka jutro). Gdy odpowiesz "wiem" â€” przechodzi dalej (za 6 dni, 2 tygodnie, miesiÄ…c...). Gdy "nie wiem" â€” wraca do PudeÅ‚ka 1.</p>
          </div>
        </div>
        <div class="method-step">
          <div class="method-step-icon">ğŸ“ˆ</div>
          <div class="method-step-text">
            <strong>Dopasowanie do Ciebie</strong>
            <p>Algorytm Å›ledzi, ktÃ³re phrasal verbs sprawiajÄ… Ci trudnoÅ›Ä‡. Te trudniejsze zobaczysz czÄ™Å›ciej, a Å‚atwe â€” coraz rzadziej.</p>
          </div>
        </div>
        <div class="method-step">
          <div class="method-step-icon">ğŸ¯</div>
          <div class="method-step-text">
            <strong>Optymalny moment</strong>
            <p>PowtÃ³rka pojawia siÄ™ tuÅ¼ przed tym, jak zapomnisz â€” nie za wczeÅ›nie (strata czasu) i nie za pÃ³Åºno (juÅ¼ zapomniaÅ‚eÅ›). To metoda SM-2 z badaÅ„ nad pamiÄ™ciÄ….</p>
          </div>
        </div>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="stat-total-all">0</div>
        <div class="stat-label">Wszystkie</div>
      </div>
      <div class="stat-card">
        <div class="stat-value accent" id="stat-to-learn">0</div>
        <div class="stat-label">Do nauki</div>
      </div>
      <div class="stat-card">
        <div class="stat-value yellow" id="stat-learning">0</div>
        <div class="stat-label">W trakcie nauki</div>
      </div>
      <div class="stat-card">
        <div class="stat-value green" id="stat-known">0</div>
        <div class="stat-label">Opanowane</div>
      </div>
    </div>

    <div class="streak-card">
      <div class="streak-icon">&#128293;</div>
      <div class="streak-info">
        <div class="streak-current" id="streak-current">0 dni z rzÄ™du</div>
        <div class="streak-best" id="streak-best">Rekord: 0 dni</div>
      </div>
    </div>

    <button class="start-btn" id="start-learn-btn" disabled>
      Rozpocznij naukÄ™
    </button>
    <button class="start-btn start-btn-secondary" id="start-quiz-btn" disabled>
      Tryb quiz
    </button>
  </div>

  <!-- ====== Ekran: Nauka (fiszki) ====== -->
  <div class="screen" id="screen-learn">
    <div class="flashcard-header">
      <span class="flashcard-counter" id="flashcard-counter">0 / 0</span>
      <button class="flashcard-close" id="flashcard-close" title="ZakoÅ„cz sesjÄ™">&times;</button>
    </div>

    <div class="flashcard" id="flashcard">
      <!-- TreÅ›Ä‡ generowana dynamicznie przez flashcards.js -->
      <div class="loading-text">
        <span class="spinner"></span>
        Åadowanie fiszek...
      </div>
    </div>
  </div>

  <!-- ====== Ekran: Quiz ====== -->
  <div class="screen" id="screen-quiz">
    <div class="flashcard-header">
      <span class="flashcard-counter" id="quiz-counter">0 / 0</span>
      <button class="flashcard-close" id="quiz-close" title="ZakoÅ„cz sesjÄ™">&times;</button>
    </div>
    <div class="flashcard" id="quiz-content">
      <div class="loading-text">
        <span class="spinner"></span>
        Åadowanie quizu...
      </div>
    </div>
  </div>

  <!-- ====== Ekran: Podsumowanie sesji ====== -->
  <div class="screen" id="screen-summary">
    <div class="summary-card" id="summary-content">
      <!-- TreÅ›Ä‡ generowana przez session.js -->
    </div>
  </div>

  <!-- ====== Ekran: Dashboard (postÄ™py) ====== -->
  <div class="screen" id="screen-dashboard">
    <h2 class="mb-24">Twoje postÄ™py</h2>
    <div id="dashboard-content">
      <div class="loading-text">
        <span class="spinner"></span>
        Åadowanie statystyk...
      </div>
    </div>
  </div>

  <!-- ====== Ekran: Ustawienia ====== -->
  <div class="screen" id="screen-settings">
    <h2 class="mb-24">Ustawienia</h2>
    <div id="settings-content">
      <!-- TreÅ›Ä‡ generowana przez settings.js -->
    </div>
  </div>

  <!-- ====== Ekran: Panel admina ====== -->
  <div class="screen" id="screen-admin">
    <h2 class="mb-24">Panel administratora</h2>
    <div id="admin-content">
      <div class="loading-text">
        <span class="spinner"></span>
        Åadowanie danych...
      </div>
    </div>
  </div>

</div>

<!-- ====== Skrypty ====== -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
<script src="js/supabase.js"></script>
<script src="js/auth.js"></script>
<script src="js/speech.js"></script>
<script src="js/sm2.js"></script>
<script src="js/flashcards.js"></script>
<script src="js/quiz.js"></script>
<script src="js/admin.js"></script>
<script src="js/dashboard.js"></script>
<script src="js/settings.js"></script>
<script src="js/app.js"></script>

</body>
</html>
